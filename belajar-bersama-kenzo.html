<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üåü Belajar Bersama Kenzo üåü</title>
<link href="https://fonts.googleapis.com/css2?family=Fredoka+One&family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">
<style>
  :root { --card-bg:#FFFEF7; --shadow:0 8px 25px rgba(0,0,0,0.15); }
  * { margin:0; padding:0; box-sizing:border-box; }
  body { font-family:'Nunito',sans-serif; background:linear-gradient(180deg,#87CEEB 0%,#B0E0FF 40%,#C8F0C8 100%); min-height:100vh; overflow-x:hidden; }

  /* Clouds */
  .clouds { position:fixed; top:0; left:0; width:100%; pointer-events:none; z-index:0; }
  .cloud { position:absolute; background:white; border-radius:50px; opacity:0.8; animation:float-cloud linear infinite; }
  .cloud::before,.cloud::after { content:''; position:absolute; background:white; border-radius:50%; }
  .cloud:nth-child(1){width:120px;height:40px;top:5%;animation-duration:25s;animation-delay:-5s;}
  .cloud:nth-child(1)::before{width:60px;height:60px;top:-30px;left:15px;}
  .cloud:nth-child(1)::after{width:40px;height:40px;top:-20px;right:20px;}
  .cloud:nth-child(2){width:80px;height:30px;top:12%;animation-duration:30s;animation-delay:-12s;}
  .cloud:nth-child(2)::before{width:40px;height:40px;top:-20px;left:10px;}
  .cloud:nth-child(2)::after{width:30px;height:30px;top:-15px;right:10px;}
  .cloud:nth-child(3){width:100px;height:35px;top:8%;animation-duration:20s;animation-delay:-8s;}
  .cloud:nth-child(3)::before{width:50px;height:50px;top:-25px;left:12px;}
  .cloud:nth-child(3)::after{width:35px;height:35px;top:-18px;right:15px;}
  @keyframes float-cloud{from{transform:translateX(-200px);}to{transform:translateX(calc(100vw + 200px));}}
  .star-deco{position:fixed;animation:twinkle 2s ease-in-out infinite;font-size:20px;pointer-events:none;z-index:0;}
  @keyframes twinkle{0%,100%{opacity:0.3;transform:scale(1);}50%{opacity:1;transform:scale(1.3);}}

  /* Header */
  header{position:relative;z-index:10;text-align:center;padding:25px 20px 15px;}
  .title-wrap{display:inline-block;background:linear-gradient(135deg,#FF6B9D,#FFD700,#4CAF50,#3498DB);background-size:300% 300%;animation:gradient-shift 3s ease infinite;border-radius:30px;padding:12px 35px;box-shadow:var(--shadow),0 0 30px rgba(255,107,157,0.4);}
  @keyframes gradient-shift{0%{background-position:0% 50%;}50%{background-position:100% 50%;}100%{background-position:0% 50%;}}
  h1{font-family:'Fredoka One',cursive;font-size:clamp(24px,5vw,48px);color:white;text-shadow:3px 3px 0 rgba(0,0,0,0.2);letter-spacing:2px;}
  .subtitle{color:rgba(255,255,255,0.95);font-size:15px;font-weight:700;margin-top:3px;}

  /* Nav */
  nav{position:relative;z-index:10;display:flex;justify-content:center;flex-wrap:wrap;gap:10px;padding:12px 15px;}
  .nav-btn{font-family:'Fredoka One',cursive;font-size:13px;padding:9px 16px;border:none;border-radius:50px;cursor:pointer;transition:all 0.2s;box-shadow:0 5px 0 rgba(0,0,0,0.2);color:white;position:relative;top:0;user-select:none;}
  .nav-btn:hover{transform:translateY(-2px);box-shadow:0 7px 0 rgba(0,0,0,0.2);}
  .nav-btn:active,.nav-btn.active{top:4px;box-shadow:0 1px 0 rgba(0,0,0,0.2);}
  .btn-alfabet{background:linear-gradient(135deg,#FF6B9D,#FF8E53);}
  .btn-hijaiyah{background:linear-gradient(135deg,#4CAF50,#2E7D32);}
  .btn-hitung{background:linear-gradient(135deg,#FF8C42,#E65100);}
  .btn-hewan{background:linear-gradient(135deg,#3498DB,#1565C0);}
  .btn-doa{background:linear-gradient(135deg,#9B59B6,#6A1B9A);}
  .btn-lagu{background:linear-gradient(135deg,#E91E63,#880E4F);}

  /* Main */
  main{position:relative;z-index:10;max-width:1000px;margin:0 auto;padding:10px 15px 80px;}
  .section{display:none;}
  .section.active{display:block;animation:pop-in 0.4s cubic-bezier(0.175,0.885,0.32,1.275);}
  @keyframes pop-in{from{opacity:0;transform:scale(0.8) translateY(20px);}to{opacity:1;transform:scale(1) translateY(0);}}
  .section-title{font-family:'Fredoka One',cursive;font-size:28px;text-align:center;margin-bottom:15px;text-shadow:2px 2px 0 rgba(0,0,0,0.1);}

  /* ===== ALFABET ===== */
  #alfabet .section-title{color:#FF6B9D;}
  .alfabet-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(80px,1fr));gap:9px;}
  .huruf-card{background:var(--card-bg);border-radius:18px;padding:10px 6px;text-align:center;cursor:pointer;box-shadow:0 5px 0 rgba(0,0,0,0.15);transition:all 0.2s;border:3px solid transparent;position:relative;top:0;}
  .huruf-card:hover{transform:translateY(-4px);box-shadow:0 9px 0 rgba(0,0,0,0.15);}
  .huruf-card:active{top:4px;box-shadow:0 1px 0 rgba(0,0,0,0.1);}
  .huruf-big{font-family:'Fredoka One',cursive;font-size:30px;line-height:1;display:block;}
  .huruf-small{font-size:13px;font-weight:700;color:#666;display:block;}
  .huruf-emoji{font-size:20px;display:block;margin-top:2px;}
  .huruf-contoh{font-size:10px;color:#999;display:block;margin-top:1px;}
  .huruf-card:nth-child(4n+1){border-color:#FF6B9D;}.huruf-card:nth-child(4n+1) .huruf-big{color:#FF6B9D;}
  .huruf-card:nth-child(4n+2){border-color:#FFD700;}.huruf-card:nth-child(4n+2) .huruf-big{color:#E67E22;}
  .huruf-card:nth-child(4n+3){border-color:#4CAF50;}.huruf-card:nth-child(4n+3) .huruf-big{color:#27AE60;}
  .huruf-card:nth-child(4n+4){border-color:#3498DB;}.huruf-card:nth-child(4n+4) .huruf-big{color:#2980B9;}

  /* ===== HIJAIYAH ===== */
  #hijaiyah .section-title{color:#27AE60;}
  .hijaiyah-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(95px,1fr));gap:11px;}
  .hijaiah-card{background:var(--card-bg);border-radius:18px;padding:13px 8px;text-align:center;cursor:pointer;box-shadow:0 5px 0 rgba(0,0,0,0.15);transition:all 0.2s;position:relative;top:0;border:3px solid #4CAF50;}
  .hijaiah-card:hover{transform:translateY(-4px);}
  .hijaiah-card:active{top:4px;box-shadow:0 1px 0 rgba(0,0,0,0.1);}
  .hijaiah-arab{font-size:40px;display:block;line-height:1.3;color:#2E7D32;}
  .hijaiah-nama{font-family:'Fredoka One',cursive;font-size:15px;color:#27AE60;display:block;margin-top:3px;}
  .hijaiah-bunyi{font-size:11px;color:#888;display:block;}

  /* ===== BERHITUNG ===== */
  #hitung .section-title{color:#E65100;}
  .hitung-tabs{display:flex;justify-content:center;gap:10px;margin-bottom:20px;flex-wrap:wrap;}
  .hitung-tab{font-family:'Fredoka One',cursive;font-size:15px;padding:9px 20px;border:3px solid #FF8C42;border-radius:50px;background:white;color:#FF8C42;cursor:pointer;transition:all 0.2s;}
  .hitung-tab.active,.hitung-tab:hover{background:#FF8C42;color:white;}
  .angka-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(100px,1fr));gap:12px;}
  .angka-card{background:var(--card-bg);border-radius:20px;padding:14px 10px;text-align:center;cursor:pointer;box-shadow:0 5px 0 rgba(0,0,0,0.15);transition:all 0.2s;border:3px solid #FF8C42;position:relative;top:0;}
  .angka-card:hover{transform:translateY(-4px);box-shadow:0 9px 0 rgba(0,0,0,0.15);}
  .angka-card:active{top:4px;box-shadow:0 1px 0 rgba(0,0,0,0.1);}
  .angka-besar{font-family:'Fredoka One',cursive;font-size:44px;color:#E65100;line-height:1;display:block;}
  .angka-kata{font-family:'Fredoka One',cursive;font-size:14px;color:#555;display:block;margin-top:2px;}
  .angka-titik{font-size:13px;display:block;margin-top:3px;line-height:1.4;min-height:20px;}
  .hitung-game{background:var(--card-bg);border-radius:30px;padding:28px 24px;max-width:480px;margin:0 auto;box-shadow:var(--shadow);text-align:center;}
  .soal-visual{font-size:50px;letter-spacing:4px;margin-bottom:8px;min-height:65px;display:block;}
  .soal-teks{font-family:'Fredoka One',cursive;font-size:22px;color:#444;margin-bottom:20px;}
  .hitung-options{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-bottom:14px;}
  .hitung-option{font-family:'Fredoka One',cursive;font-size:28px;padding:14px;border:3px solid #ddd;border-radius:15px;background:white;cursor:pointer;transition:all 0.2s;color:#333;}
  .hitung-option:hover{border-color:#FF8C42;background:#FFF3E0;transform:scale(1.04);}
  .hitung-option.benar{border-color:#27AE60;background:#D5F5E3;color:#27AE60;}
  .hitung-option.salah{border-color:#E74C3C;background:#FADBD8;color:#E74C3C;}
  .hitung-feedback{font-family:'Fredoka One',cursive;font-size:22px;min-height:33px;margin-bottom:8px;}
  .hitung-skor{font-size:15px;color:#888;margin-bottom:14px;}
  .hitung-level{font-size:13px;color:#FF8C42;font-weight:800;margin-bottom:8px;}

  /* ===== HEWAN ===== */
  #hewan .section-title{color:#2980B9;}
  .progress-bar{display:flex;justify-content:center;gap:6px;margin-bottom:14px;flex-wrap:wrap;}
  .star-progress{font-size:20px;opacity:0.3;transition:all 0.3s;}
  .star-progress.active{opacity:1;animation:pop-star 0.3s cubic-bezier(0.175,0.885,0.32,1.275);}
  @keyframes pop-star{0%{transform:scale(0);}70%{transform:scale(1.3);}100%{transform:scale(1);}}
  .hewan-game{background:var(--card-bg);border-radius:30px;padding:28px 22px;box-shadow:var(--shadow);text-align:center;max-width:480px;margin:0 auto;}
  .hewan-question{font-size:75px;display:block;margin-bottom:8px;animation:bounce-emoji 1s ease-in-out infinite;}
  @keyframes bounce-emoji{0%,100%{transform:translateY(0);}50%{transform:translateY(-10px);}}
  .hewan-hint{font-family:'Fredoka One',cursive;font-size:20px;color:#555;margin-bottom:4px;}
  .hewan-clue{font-size:13px;color:#888;margin-bottom:18px;font-style:italic;}
  .hewan-options{display:grid;grid-template-columns:1fr 1fr;gap:11px;margin-bottom:13px;}
  .hewan-option{font-family:'Fredoka One',cursive;font-size:17px;padding:13px;border:3px solid #ddd;border-radius:14px;background:white;cursor:pointer;transition:all 0.2s;color:#333;}
  .hewan-option:hover{border-color:#3498DB;background:#EBF5FB;transform:scale(1.03);}
  .hewan-option.benar{border-color:#27AE60;background:#D5F5E3;color:#27AE60;}
  .hewan-option.salah{border-color:#E74C3C;background:#FADBD8;color:#E74C3C;}
  .hewan-feedback{font-family:'Fredoka One',cursive;font-size:20px;min-height:32px;margin-bottom:8px;}
  .hewan-score{font-size:15px;color:#888;margin-bottom:13px;}

  .btn-next{font-family:'Fredoka One',cursive;font-size:17px;padding:11px 30px;color:white;border:none;border-radius:50px;cursor:pointer;box-shadow:0 5px 0 rgba(0,0,0,0.2);transition:all 0.2s;display:none;}
  .btn-next:hover{transform:translateY(-2px);}
  .btn-next.show{display:inline-block;}
  .btn-next-hewan{background:linear-gradient(135deg,#3498DB,#1565C0);}
  .btn-next-hitung{background:linear-gradient(135deg,#FF8C42,#E65100);}

  /* ===== DOA ===== */
  #doa .section-title{color:#8E44AD;}
  .doa-sumber-note{background:rgba(255,255,255,0.8);border-radius:15px;padding:10px 16px;text-align:center;margin-bottom:18px;font-size:13px;color:#555;font-weight:700;border:2px solid #D7BDE2;}
  .doa-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:15px;}
  .doa-card{background:var(--card-bg);border-radius:22px;padding:20px;box-shadow:var(--shadow);border-left:6px solid #9B59B6;cursor:pointer;transition:all 0.2s;position:relative;overflow:hidden;}
  .doa-card::before{content:'';position:absolute;top:-20px;right:-20px;width:70px;height:70px;background:rgba(155,89,182,0.08);border-radius:50%;}
  .doa-card:hover{transform:translateY(-3px);box-shadow:0 12px 30px rgba(0,0,0,0.2);}
  .doa-icon{font-size:28px;display:block;margin-bottom:6px;}
  .doa-nama{font-family:'Fredoka One',cursive;font-size:17px;color:#8E44AD;margin-bottom:5px;}
  .doa-sumber-tag{display:inline-block;font-size:10px;background:#D7BDE2;color:#6A1B9A;border-radius:8px;padding:2px 8px;margin-bottom:8px;font-weight:800;}
  .doa-arab{font-size:20px;color:#1B5E20;direction:rtl;text-align:right;line-height:1.9;margin-bottom:7px;font-weight:700;}
  .doa-latin{font-size:12px;color:#E67E22;font-style:italic;font-weight:700;margin-bottom:5px;line-height:1.8;}
  .doa-arti{font-size:12px;color:#555;line-height:1.5;}
  .doa-collapsed .doa-arab,.doa-collapsed .doa-latin,.doa-collapsed .doa-arti,.doa-collapsed .doa-voice-row{display:none;}
  .doa-toggle-hint{font-size:11px;color:#9B59B6;font-weight:700;margin-top:5px;display:block;}
  /* Doa voice row */
  .doa-voice-row{display:flex;gap:8px;align-items:center;margin-top:10px;flex-wrap:wrap;}
  .doa-voice-btn{font-family:'Fredoka One',cursive;font-size:12px;padding:7px 13px;border:none;border-radius:50px;cursor:pointer;transition:all 0.2s;color:white;display:flex;align-items:center;gap:5px;box-shadow:0 4px 0 rgba(0,0,0,0.15);position:relative;top:0;flex-shrink:0;}
  .doa-voice-btn:active{top:3px;box-shadow:0 1px 0 rgba(0,0,0,0.1);}
  .doa-voice-btn:hover{filter:brightness(1.1);transform:translateY(-1px);}
  .btn-baca-latin{background:linear-gradient(135deg,#E67E22,#B7600A);}
  .btn-baca-arti{background:linear-gradient(135deg,#27AE60,#1A6E3C);}
  .btn-stop-doa{background:linear-gradient(135deg,#E74C3C,#A93226);}
  .btn-baca-latin.playing{animation:pulse-btn 0.6s ease-in-out infinite alternate;}
  @keyframes pulse-btn{from{transform:scale(1);}to{transform:scale(1.06);}}
  /* Highlight per kata */
  .hl{background:rgba(255,200,0,0.5);border-radius:4px;padding:0 2px;transition:background 0.1s;}

  /* ===== LAGU ===== */
  #lagu .section-title{color:#E91E63;}
  .lagu-intro{background:rgba(255,255,255,0.85);border-radius:18px;padding:12px 18px;text-align:center;margin-bottom:18px;font-size:14px;color:#555;font-weight:700;border:2px solid #F8BBD9;}
  .lagu-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(290px,1fr));gap:16px;}
  .lagu-card{background:var(--card-bg);border-radius:22px;padding:0;box-shadow:var(--shadow);overflow:hidden;transition:all 0.2s;}
  .lagu-card:hover{transform:translateY(-3px);box-shadow:0 12px 30px rgba(0,0,0,0.2);}
  .lagu-header{padding:16px 18px 12px;display:flex;align-items:center;gap:12px;cursor:pointer;}
  .lagu-emoji{font-size:36px;flex-shrink:0;}
  .lagu-info{flex:1;}
  .lagu-title{font-family:'Fredoka One',cursive;font-size:18px;margin-bottom:2px;}
  .lagu-desc{font-size:12px;color:#888;}
  .lagu-controls{padding:0 18px 14px;display:flex;gap:8px;flex-wrap:wrap;align-items:center;}
  .lagu-play-btn{font-family:'Fredoka One',cursive;font-size:14px;padding:9px 18px;border:none;border-radius:50px;cursor:pointer;color:white;box-shadow:0 4px 0 rgba(0,0,0,0.2);transition:all 0.2s;display:flex;align-items:center;gap:6px;}
  .lagu-play-btn:hover{transform:translateY(-2px);filter:brightness(1.1);}
  .lagu-play-btn:active{transform:translateY(2px);box-shadow:0 1px 0 rgba(0,0,0,0.2);}
  .btn-play-lagu{background:linear-gradient(135deg,#E91E63,#880E4F);}
  .btn-stop-lagu{background:linear-gradient(135deg,#757575,#424242);}
  .btn-baca-lagu{background:linear-gradient(135deg,#1E88E5,#0D47A1);}
  .lagu-lirik-wrap{max-height:0;overflow:hidden;transition:max-height 0.4s ease;}
  .lagu-lirik-wrap.open{max-height:800px;}
  .lagu-lirik{padding:12px 18px 16px;border-top:2px dashed #F8BBD9;font-size:14px;line-height:2;color:#444;font-weight:700;white-space:pre-wrap;}
  .lagu-lirik .hl{background:rgba(233,30,99,0.2);border-radius:4px;padding:0 3px;}
  .lagu-now-playing{display:none;align-items:center;gap:5px;font-size:12px;color:#E91E63;font-weight:800;padding:0 18px 10px;}
  .lagu-now-playing.show{display:flex;}
  .music-wave{display:inline-flex;gap:2px;align-items:flex-end;}
  .music-wave span{width:3px;background:#E91E63;border-radius:2px;animation:wave-music 0.5s ease-in-out infinite;}
  .music-wave span:nth-child(2){animation-delay:0.1s;}.music-wave span:nth-child(3){animation-delay:0.2s;}.music-wave span:nth-child(4){animation-delay:0.3s;}
  @keyframes wave-music{0%,100%{height:4px;}50%{height:13px;}}
  /* Color per card */
  .lagu-card:nth-child(6n+1) .lagu-title{color:#E91E63;}
  .lagu-card:nth-child(6n+2) .lagu-title{color:#FF8C42;}
  .lagu-card:nth-child(6n+3) .lagu-title{color:#27AE60;}
  .lagu-card:nth-child(6n+4) .lagu-title{color:#3498DB;}
  .lagu-card:nth-child(6n+5) .lagu-title{color:#9B59B6;}
  .lagu-card:nth-child(6n+6) .lagu-title{color:#E67E22;}

  /* Sound btn */
  .sound-btn{position:fixed;bottom:20px;right:20px;width:52px;height:52px;border-radius:50%;background:linear-gradient(135deg,#FFD700,#FF8C42);border:none;font-size:22px;cursor:pointer;box-shadow:var(--shadow);z-index:100;transition:all 0.2s;}
  .sound-btn:hover{transform:scale(1.1);}

  /* Celebration */
  .celebration{position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:999;display:none;}
  .confetti{position:absolute;animation:confetti-fall 1.5s ease-in forwards;border-radius:2px;}
  @keyframes confetti-fall{0%{transform:translateY(-20px) rotate(0deg);opacity:1;}100%{transform:translateY(100vh) rotate(720deg);opacity:0;}}

  @media(max-width:480px){
    .alfabet-grid{grid-template-columns:repeat(auto-fill,minmax(65px,1fr));}
    .hijaiyah-grid{grid-template-columns:repeat(auto-fill,minmax(78px,1fr));}
    .angka-grid{grid-template-columns:repeat(auto-fill,minmax(85px,1fr));}
    .lagu-grid{grid-template-columns:1fr;}
    .huruf-big{font-size:24px;}.hijaiah-arab{font-size:34px;}
    .hewan-question{font-size:60px;}.soal-visual{font-size:42px;}
    h1{font-size:22px;}
  }
</style>
</head>
<body>
<div class="clouds"><div class="cloud"></div><div class="cloud"></div><div class="cloud"></div></div>
<span class="star-deco" style="top:15%;left:5%;animation-delay:0s">‚≠ê</span>
<span class="star-deco" style="top:25%;right:8%;animation-delay:0.5s">üåü</span>
<span class="star-deco" style="top:62%;left:3%;animation-delay:1s">‚ú®</span>
<span class="star-deco" style="top:72%;right:5%;animation-delay:1.5s">‚≠ê</span>
<div class="celebration" id="celebration"></div>

<header>
  <div class="title-wrap">
    <h1>üåü Belajar Bersama Kenzo üåü</h1>
    <p class="subtitle">Ayo belajar sambil bermain, Kenzo! üéâ</p>
  </div>
</header>

<nav>
  <button class="nav-btn btn-alfabet active" onclick="showSection('alfabet',this)">üî§ Alfabet</button>
  <button class="nav-btn btn-hijaiyah" onclick="showSection('hijaiyah',this)">üåô Hijaiyah</button>
  <button class="nav-btn btn-hitung" onclick="showSection('hitung',this)">üî¢ Berhitung</button>
  <button class="nav-btn btn-hewan" onclick="showSection('hewan',this)">ü¶Å Tebak Gambar</button>
  <button class="nav-btn btn-doa" onclick="showSection('doa',this)">ü§≤ Doa Harian</button>
  <button class="nav-btn btn-lagu" onclick="showSection('lagu',this)">üéµ Lagu Anak</button>
</nav>

<main>

<!-- ALFABET -->
<section id="alfabet" class="section active">
  <div class="section-title">üî§ Huruf Alfabet A-Z</div>
  <p style="text-align:center;color:#555;margin-bottom:14px;font-size:14px;font-weight:700;">Klik hurufnya untuk belajar! üéµ</p>
  <div class="alfabet-grid" id="alfabet-grid"></div>
</section>

<!-- HIJAIYAH -->
<section id="hijaiyah" class="section">
  <div class="section-title">üåô Huruf Hijaiyah</div>
  <p style="text-align:center;color:#555;margin-bottom:14px;font-size:14px;font-weight:700;">Ada 29 huruf hijaiyah. Klik untuk belajar! ‚ò™Ô∏è</p>
  <div class="hijaiyah-grid" id="hijaiyah-grid"></div>
</section>

<!-- BERHITUNG -->
<section id="hitung" class="section">
  <div class="section-title">üî¢ Belajar Berhitung</div>
  <div class="hitung-tabs">
    <button class="hitung-tab active" onclick="switchHitungTab('angka',this)">üìñ Mengenal Angka</button>
    <button class="hitung-tab" onclick="switchHitungTab('tambah',this)">‚ûï Penjumlahan</button>
    <button class="hitung-tab" onclick="switchHitungTab('kurang',this)">‚ûñ Pengurangan</button>
  </div>
  <div id="tab-angka"><div class="angka-grid" id="angka-grid"></div></div>
  <div id="tab-tambah" style="display:none;">
    <div class="hitung-game">
      <div class="hitung-level" id="level-tambah">Level 1: Angka 1-5</div>
      <span class="soal-visual" id="visual-tambah"></span>
      <p class="soal-teks" id="teks-tambah">Berapa hasilnya?</p>
      <div class="hitung-options" id="opts-tambah"></div>
      <div class="hitung-feedback" id="fb-tambah"></div>
      <div class="hitung-skor" id="skor-tambah">Skor: 0 ‚≠ê</div>
      <button class="btn-next btn-next-hitung" id="btnNxtTambah" onclick="nextHitung('tambah')">Soal Berikutnya ‚û°Ô∏è</button>
    </div>
  </div>
  <div id="tab-kurang" style="display:none;">
    <div class="hitung-game">
      <div class="hitung-level" id="level-kurang">Level 1: Angka 1-5</div>
      <span class="soal-visual" id="visual-kurang"></span>
      <p class="soal-teks" id="teks-kurang">Berapa hasilnya?</p>
      <div class="hitung-options" id="opts-kurang"></div>
      <div class="hitung-feedback" id="fb-kurang"></div>
      <div class="hitung-skor" id="skor-kurang">Skor: 0 ‚≠ê</div>
      <button class="btn-next btn-next-hitung" id="btnNxtKurang" onclick="nextHitung('kurang')">Soal Berikutnya ‚û°Ô∏è</button>
    </div>
  </div>
</section>

<!-- HEWAN -->
<section id="hewan" class="section">
  <div class="section-title">ü¶Å Tebak Nama Hewan & Benda</div>
  <div class="progress-bar" id="progress-stars"></div>
  <div class="hewan-game">
    <span class="hewan-question" id="hewan-emoji">ü¶Å</span>
    <p class="hewan-hint" id="hewan-hint">Apa nama hewan ini?</p>
    <p class="hewan-clue" id="hewan-clue">Hewan yang gagah!</p>
    <div class="hewan-options" id="hewan-options"></div>
    <div class="hewan-feedback" id="hewan-feedback"></div>
    <div class="hewan-score" id="hewan-score">Skor: 0 ‚≠ê</div>
    <button class="btn-next btn-next-hewan" id="btn-next-hewan" onclick="nextQuestion()">Soal Berikutnya ‚û°Ô∏è</button>
  </div>
</section>

<!-- DOA -->
<section id="doa" class="section">
  <div class="section-title">ü§≤ Doa-Doa Harian</div>
  <div class="doa-sumber-note">
    üìö Sumber: <strong>Al-Qur'an</strong>, <strong>HR. Shahih Bukhari</strong>, <strong>HR. Shahih Muslim</strong>, dan kitab hadits terpercaya.<br>
    Klik kartu untuk buka ‚Ä¢ Tekan tombol üîä untuk dengarkan doa!
  </div>
  <div class="doa-grid" id="doa-grid"></div>
</section>

<!-- LAGU -->
<section id="lagu" class="section">
  <div class="section-title">üéµ Lagu Anak-Anak</div>
  <div class="lagu-intro">
    üé∂ Yuk nyanyi bersama Kenzo! Tekan <strong>‚ñ∂ Dengar</strong> untuk mendengarkan, atau <strong>üìñ Lirik</strong> untuk melihat syairnya! üé∂
  </div>
  <div class="lagu-grid" id="lagu-grid"></div>
</section>

</main>

<button class="sound-btn" onclick="toggleSound()" id="sound-btn">üîä</button>

<script>
// ============ DATA ============

const alfabetData = [
  {h:'A',k:'a',c:'Apel',e:'üçé'},{h:'B',k:'b',c:'Buku',e:'üìö'},{h:'C',k:'c',c:'Coklat',e:'üç´'},
  {h:'D',k:'d',c:'Durian',e:'üåµ'},{h:'E',k:'e',c:'Es Krim',e:'üç¶'},{h:'F',k:'f',c:'Foto',e:'üì∑'},
  {h:'G',k:'g',c:'Gajah',e:'üêò'},{h:'H',k:'h',c:'Harimau',e:'üêØ'},{h:'I',k:'i',c:'Ikan',e:'üêü'},
  {h:'J',k:'j',c:'Jerapah',e:'ü¶í'},{h:'K',k:'k',c:'Kucing',e:'üê±'},{h:'L',k:'l',c:'Lebah',e:'üêù'},
  {h:'M',k:'m',c:'Mangga',e:'ü•≠'},{h:'N',k:'n',c:'Naga',e:'üêâ'},{h:'O',k:'o',c:'Oren',e:'üçä'},
  {h:'P',k:'p',c:'Pisang',e:'üçå'},{h:'Q',k:'q',c:"Qur'an",e:'üìñ'},{h:'R',k:'r',c:'Robot',e:'ü§ñ'},
  {h:'S',k:'s',c:'Singa',e:'ü¶Å'},{h:'T',k:'t',c:'Tikus',e:'üê≠'},{h:'U',k:'u',c:'Ulat',e:'üêõ'},
  {h:'V',k:'v',c:'Violin',e:'üéª'},{h:'W',k:'w',c:'Wortel',e:'ü•ï'},{h:'X',k:'x',c:'X-Ray',e:'ü©ª'},
  {h:'Y',k:'y',c:'Yogurt',e:'ü•õ'},{h:'Z',k:'z',c:'Zebra',e:'ü¶ì'},
];

const hijaiyahData = [
  {a:'ÿß',n:'Alif',b:'a'},{a:'ÿ®',n:'Ba',b:'ba'},{a:'ÿ™',n:'Ta',b:'ta'},{a:'ÿ´',n:'Tsa',b:'tsa'},
  {a:'ÿ¨',n:'Jim',b:'ja'},{a:'ÿ≠',n:'Ha',b:'ha'},{a:'ÿÆ',n:'Kha',b:'kha'},{a:'ÿØ',n:'Dal',b:'da'},
  {a:'ÿ∞',n:'Dzal',b:'dza'},{a:'ÿ±',n:'Ra',b:'ra'},{a:'ÿ≤',n:'Zai',b:'za'},{a:'ÿ≥',n:'Sin',b:'sa'},
  {a:'ÿ¥',n:'Syin',b:'sya'},{a:'ÿµ',n:'Shad',b:'sha'},{a:'ÿ∂',n:'Dhad',b:'dha'},{a:'ÿ∑',n:'Tha',b:'tha'},
  {a:'ÿ∏',n:'Zha',b:'zha'},{a:'ÿπ',n:'Ain',b:"'a"},{a:'ÿ∫',n:'Ghain',b:'gha'},{a:'ŸÅ',n:'Fa',b:'fa'},
  {a:'ŸÇ',n:'Qaf',b:'qa'},{a:'ŸÉ',n:'Kaf',b:'ka'},{a:'ŸÑ',n:'Lam',b:'la'},{a:'ŸÖ',n:'Mim',b:'ma'},
  {a:'ŸÜ',n:'Nun',b:'na'},{a:'Ÿà',n:'Wau',b:'wa'},{a:'Ÿá',n:'Ha',b:'ha'},{a:'ÿ°',n:'Hamzah',b:"'"},{a:'Ÿä',n:'Ya',b:'ya'},
];

const emojiBuah=['üçé','üçå','üçä','üçá','üçì','üçí','ü•ù','ü´ê','üçã','üçë','üçç','ü•≠','üçà','üçê','üçÖ','ü´í','ü••','üåΩ','ü•ï','üçÜ'];
const angkaKata=['','Satu','Dua','Tiga','Empat','Lima','Enam','Tujuh','Delapan','Sembilan','Sepuluh','Sebelas','Dua Belas','Tiga Belas','Empat Belas','Lima Belas','Enam Belas','Tujuh Belas','Delapan Belas','Sembilan Belas','Dua Puluh'];

const hewanData = [
  {e:'ü¶Å',nama:'Singa',clue:'Raja hutan yang gagah dan punya rambut lebat!',opsi:['Singa','Harimau','Serigala','Cheetah'],jenis:'hewan'},
  {e:'üêò',nama:'Gajah',clue:'Hewan terbesar di darat dengan hidung panjang!',opsi:['Kuda Nil','Gajah','Badak','Beruang'],jenis:'hewan'},
  {e:'ü¶í',nama:'Jerapah',clue:'Hewan dengan leher paling panjang!',opsi:['Kuda','Jerapah','Unta','Rusa'],jenis:'hewan'},
  {e:'üêß',nama:'Pinguin',clue:'Burung yang tidak bisa terbang dan hidup di kutub!',opsi:['Pinguin','Elang','Merpati','Bebek'],jenis:'hewan'},
  {e:'ü¶ã',nama:'Kupu-kupu',clue:'Serangga cantik yang terbang dari bunga ke bunga!',opsi:['Lebah','Capung','Kupu-kupu','Lalat'],jenis:'hewan'},
  {e:'üê¢',nama:'Kura-kura',clue:'Hewan berjalan lambat dengan rumah di punggungnya!',opsi:['Buaya','Kura-kura','Bunglon','Kodok'],jenis:'hewan'},
  {e:'ü¶ä',nama:'Rubah',clue:'Hewan berbulu oranye yang sangat cerdik!',opsi:['Rubah','Anjing','Serigala','Musang'],jenis:'hewan'},
  {e:'üê¨',nama:'Lumba-lumba',clue:'Hewan laut yang sangat pintar dan suka melompat!',opsi:['Ikan Paus','Hiu','Lumba-lumba','Singa Laut'],jenis:'hewan'},
  {e:'ü¶ú',nama:'Burung Beo',clue:'Burung berwarna-warni yang bisa meniru suara manusia!',opsi:['Kakak Tua','Burung Beo','Merak','Elang'],jenis:'hewan'},
  {e:'üêä',nama:'Buaya',clue:'Hewan reptil besar yang hidup di sungai!',opsi:['Buaya','Biawak','Iguana','Komodo'],jenis:'hewan'},
  {e:'‚úèÔ∏è',nama:'Pensil',clue:'Alat untuk menulis dan menggambar di sekolah!',opsi:['Pulpen','Pensil','Krayon','Spidol'],jenis:'benda'},
  {e:'üéí',nama:'Tas',clue:'Tempat menyimpan buku saat pergi ke sekolah!',opsi:['Koper','Dompet','Tas','Kantong'],jenis:'benda'},
  {e:'‚õëÔ∏è',nama:'Helm',clue:'Pelindung kepala saat naik sepeda atau motor!',opsi:['Topi','Helm','Mahkota','Ikat Kepala'],jenis:'benda'},
  {e:'üåÇ',nama:'Payung',clue:'Dipakai saat hujan supaya tidak basah!',opsi:['Topi Hujan','Payung','Jas Hujan','Mantel'],jenis:'benda'},
  {e:'üìö',nama:'Buku',clue:'Tempat kita belajar dan membaca cerita!',opsi:['Majalah','Koran','Buku','Album'],jenis:'benda'},
  {e:'üéÅ',nama:'Kado',clue:'Bungkusan hadiah yang diberikan saat ulang tahun!',opsi:['Kado','Kotak','Tas','Amplop'],jenis:'benda'},
  {e:'‚è∞',nama:'Jam',clue:'Alat untuk melihat waktu, berbunyi saat bangun pagi!',opsi:['Kalender','Jam','Timer','Stopwatch'],jenis:'benda'},
  {e:'üö≤',nama:'Sepeda',clue:'Kendaraan dengan dua roda yang dikayuh kaki!',opsi:['Motor','Sepeda','Skuter','Becak'],jenis:'benda'},
];

// DOA ‚Äî dengan bacaan alami (latin dipecah per frasa jeda alamiah, voice natural)
const doaData = [
  {
    icon:'üåÖ', nama:'Doa Bangun Tidur', sumber:'HR. Bukhari no. 6312',
    arab:'ÿßŸÑŸíÿ≠ŸéŸÖŸíÿØŸè ŸÑŸêŸÑŸéŸëŸáŸê ÿßŸÑŸéŸëÿ∞ŸêŸä ÿ£Ÿéÿ≠ŸíŸäŸéÿßŸÜŸéÿß ÿ®ŸéÿπŸíÿØŸé ŸÖŸéÿß ÿ£ŸéŸÖŸéÿßÿ™ŸéŸÜŸéÿß ŸàŸéÿ•ŸêŸÑŸéŸäŸíŸáŸê ÿßŸÑŸÜŸèŸëÿ¥ŸèŸàÿ±Ÿè',
    latin:'Alhamdu lillaahil-ladzii ahyaanaa... ba\'da maa amaatanaa... wa ilaihin-nusyuur...',
    latinBersih:'Alhamdu lillaahil ladzii ahyaanaa, ba da maa amaatanaa, wa ilaihin nusyuur.',
    arti:'Segala puji bagi Allah yang telah menghidupkan kami setelah mematikan kami, dan kepada-Nya kami kembali.'
  },
  {
    icon:'üò¥', nama:'Doa Sebelum Tidur', sumber:'HR. Bukhari no. 6312 & Muslim no. 2711',
    arab:'ÿ®Ÿêÿßÿ≥ŸíŸÖŸêŸÉŸé ÿßŸÑŸÑŸéŸëŸáŸèŸÖŸéŸë ÿ£ŸéŸÖŸèŸàÿ™Ÿè ŸàŸéÿ£Ÿéÿ≠ŸíŸäŸéÿß',
    latin:'Bismikallaahumma... amuutu... wa ahyaa...',
    latinBersih:'Bismikallaahumma, amuutu, wa ahyaa.',
    arti:'Dengan nama-Mu ya Allah, aku mati dan aku hidup.'
  },
  {
    icon:'üçΩÔ∏è', nama:'Doa Sebelum Makan', sumber:'HR. Abu Dawud no. 3767',
    arab:'ÿßŸÑŸÑŸéŸëŸáŸèŸÖŸéŸë ÿ®Ÿéÿßÿ±ŸêŸÉŸí ŸÑŸéŸÜŸéÿß ŸÅŸêŸäŸÖŸéÿß ÿ±Ÿéÿ≤ŸéŸÇŸíÿ™ŸéŸÜŸéÿß ŸàŸéŸÇŸêŸÜŸéÿß ÿπŸéÿ∞Ÿéÿßÿ®Ÿé ÿßŸÑŸÜŸéŸëÿßÿ±Ÿê',
    latin:'Allaahumma baarik lanaa... fiimaa razaqtanaa... waqinaa \'adzaaban-naar...',
    latinBersih:'Allaahumma baarik lanaa, fiimaa razaqtanaa, wa qinaa adzaaban naar.',
    arti:'Ya Allah, berkahilah kami pada rezeki yang telah Engkau berikan, dan lindungilah kami dari siksa api neraka.'
  },
  {
    icon:'‚úÖ', nama:'Doa Sesudah Makan', sumber:'HR. Abu Dawud no. 3850 & Tirmidzi no. 3458',
    arab:'ÿßŸÑŸíÿ≠ŸéŸÖŸíÿØŸè ŸÑŸêŸÑŸéŸëŸáŸê ÿßŸÑŸéŸëÿ∞ŸêŸä ÿ£Ÿéÿ∑ŸíÿπŸéŸÖŸéŸÜŸéÿß ŸàŸéÿ≥ŸéŸÇŸéÿßŸÜŸéÿß ŸàŸéÿ¨ŸéÿπŸéŸÑŸéŸÜŸéÿß ŸÖŸèÿ≥ŸíŸÑŸêŸÖŸêŸäŸÜŸé',
    latin:'Alhamdu lillaahil-ladzii ath\'amanaa... wa saqaanaa... wa ja\'alanaa muslimiin...',
    latinBersih:'Alhamdu lillaahil ladzii ath amanaa, wa saqaanaa, wa ja alanaa muslimiin.',
    arti:'Segala puji bagi Allah yang telah memberi kami makan, memberi kami minum, dan menjadikan kami Muslim.'
  },
  {
    icon:'üöø', nama:'Doa Masuk Kamar Mandi', sumber:'HR. Bukhari no. 142 & Muslim no. 375',
    arab:'ÿ®Ÿêÿ≥ŸíŸÖŸê ÿßŸÑŸÑŸéŸëŸáŸê ÿßŸÑŸÑŸéŸëŸáŸèŸÖŸéŸë ÿ•ŸêŸÜŸêŸëŸä ÿ£ŸéÿπŸèŸàÿ∞Ÿè ÿ®ŸêŸÉŸé ŸÖŸêŸÜŸé ÿßŸÑŸíÿÆŸèÿ®Ÿèÿ´Ÿê ŸàŸéÿßŸÑŸíÿÆŸéÿ®Ÿéÿßÿ¶Ÿêÿ´Ÿê',
    latin:'Bismillaah... Allaahumma innii a\'uudzubika... minal-khubutsi... wal-khabaa\'its...',
    latinBersih:'Bismillaah. Allaahumma innii a uudzubika, minal khubutsi, wal khabaa its.',
    arti:'Dengan nama Allah. Ya Allah, aku berlindung kepada-Mu dari setan laki-laki dan setan perempuan.'
  },
  {
    icon:'üö™', nama:'Doa Keluar Kamar Mandi', sumber:'HR. Abu Dawud no. 30 & Tirmidzi no. 7',
    arab:'ÿ∫ŸèŸÅŸíÿ±ŸéÿßŸÜŸéŸÉŸé',
    latin:'Ghufraanaka...',
    latinBersih:'Ghufraanaka.',
    arti:'Aku memohon ampunan-Mu, ya Allah.'
  },
  {
    icon:'üè†', nama:'Doa Keluar Rumah', sumber:'HR. Abu Dawud no. 5095 & Tirmidzi no. 3426',
    arab:'ÿ®Ÿêÿ≥ŸíŸÖŸê ÿßŸÑŸÑŸéŸëŸáŸê ÿ™ŸéŸàŸéŸÉŸéŸëŸÑŸíÿ™Ÿè ÿπŸéŸÑŸéŸâ ÿßŸÑŸÑŸéŸëŸáŸê ŸàŸéŸÑŸéÿß ÿ≠ŸéŸàŸíŸÑŸé ŸàŸéŸÑŸéÿß ŸÇŸèŸàŸéŸëÿ©Ÿé ÿ•ŸêŸÑŸéŸëÿß ÿ®ŸêÿßŸÑŸÑŸéŸëŸáŸê',
    latin:'Bismillaahi... tawakkaltu \'alallaahi... wa laa hawla... wa laa quwwata... illaa billaah...',
    latinBersih:'Bismillaahi, tawakkaltu alal laahi, wa laa hawla, wa laa quwwata, illaa billaah.',
    arti:'Dengan nama Allah, aku berserah diri kepada Allah. Tiada daya dan kekuatan kecuali dengan pertolongan Allah.'
  },
  {
    icon:'üè°', nama:'Doa Masuk Rumah', sumber:'HR. Muslim no. 2018',
    arab:'ÿ®Ÿêÿ≥ŸíŸÖŸê ÿßŸÑŸÑŸéŸëŸáŸê ŸàŸéŸÑŸéÿ¨ŸíŸÜŸéÿß ŸàŸéÿ®Ÿêÿ≥ŸíŸÖŸê ÿßŸÑŸÑŸéŸëŸáŸê ÿÆŸéÿ±Ÿéÿ¨ŸíŸÜŸéÿß ŸàŸéÿπŸéŸÑŸéŸâ ÿßŸÑŸÑŸéŸëŸáŸê ÿ±Ÿéÿ®ŸêŸëŸÜŸéÿß ÿ™ŸéŸàŸéŸÉŸéŸëŸÑŸíŸÜŸéÿß',
    latin:'Bismillaahi walajnaa... wa bismillaahi kharajnaa... wa \'alallaahi rabbinaa... tawakkalnaa...',
    latinBersih:'Bismillaahi walajnaa, wa bismillaahi kharajnaa, wa alal laahi rabbinaa tawakkalnaa.',
    arti:'Dengan nama Allah kami masuk, dengan nama Allah kami keluar, dan kepada Allah Tuhan kami kami berserah diri.'
  },
  {
    icon:'üìñ', nama:'Doa Sebelum Belajar', sumber:'QS. Thaha: 114',
    arab:'ÿ±Ÿéÿ®ŸêŸë ÿ≤ŸêÿØŸíŸÜŸêŸä ÿπŸêŸÑŸíŸÖŸãÿß',
    latin:'Rabbii... zidnii... \'ilmaa...',
    latinBersih:'Rabbii zidnii ilmaa.',
    arti:'Ya Tuhanku, tambahkanlah ilmuku.'
  },
  {
    icon:'üôè', nama:'Doa Untuk Orang Tua', sumber:'QS. Al-Isra: 24',
    arab:'ÿ±Ÿéÿ®ŸêŸë ÿßÿ∫ŸíŸÅŸêÿ±Ÿí ŸÑŸêŸä ŸàŸéŸÑŸêŸàŸéÿßŸÑŸêÿØŸéŸäŸéŸë ŸàŸéÿßÿ±Ÿíÿ≠ŸéŸÖŸíŸáŸèŸÖŸéÿß ŸÉŸéŸÖŸéÿß ÿ±Ÿéÿ®ŸéŸëŸäŸéÿßŸÜŸêŸä ÿµŸéÿ∫ŸêŸäÿ±Ÿãÿß',
    latin:'Rabbighfir lii... wa liwaalidayya... warhamhumaa... kamaa rabbayaanii shagiiiraa...',
    latinBersih:'Rabbighfir lii, wa liwaalidayya, warhamhumaa, kamaa rabbayaanii shaghiiraa.',
    arti:'Ya Tuhanku, ampunilah aku dan kedua orang tuaku, sayangilah mereka sebagaimana mereka menyayangiku sewaktu kecil.'
  },
  {
    icon:'üöó', nama:'Doa Naik Kendaraan', sumber:'HR. Abu Dawud no. 2602',
    arab:'ÿ≥Ÿèÿ®Ÿíÿ≠ŸéÿßŸÜŸé ÿßŸÑŸéŸëÿ∞ŸêŸä ÿ≥ŸéÿÆŸéŸëÿ±Ÿé ŸÑŸéŸÜŸéÿß ŸáŸéÿ∞Ÿéÿß ŸàŸéŸÖŸéÿß ŸÉŸèŸÜŸéŸëÿß ŸÑŸéŸáŸè ŸÖŸèŸÇŸíÿ±ŸêŸÜŸêŸäŸÜŸé ŸàŸéÿ•ŸêŸÜŸéŸëÿß ÿ•ŸêŸÑŸéŸâ ÿ±Ÿéÿ®ŸêŸëŸÜŸéÿß ŸÑŸéŸÖŸèŸÜŸÇŸéŸÑŸêÿ®ŸèŸàŸÜŸé',
    latin:'Subhaanal-ladzii sakhkhara lanaa haadzaa... wa maa kunnaa lahuu muqriniin... wa innaa ilaa rabbinaa... lamunqalibuun...',
    latinBersih:'Subhaanal ladzii sakhkhara lanaa haadzaa, wa maa kunnaa lahuu muqriniin, wa innaa ilaa rabbinaa lamunqalibuun.',
    arti:'Maha Suci Allah yang telah menundukkan kendaraan ini bagi kami, dan sesungguhnya kami akan kembali kepada Tuhan kami.'
  },
  {
    icon:'üïå', nama:'Doa Masuk Masjid', sumber:'HR. Muslim no. 713',
    arab:'ÿßŸÑŸÑŸéŸëŸáŸèŸÖŸéŸë ÿßŸÅŸíÿ™Ÿéÿ≠Ÿí ŸÑŸêŸä ÿ£Ÿéÿ®ŸíŸàŸéÿßÿ®Ÿé ÿ±Ÿéÿ≠ŸíŸÖŸéÿ™ŸêŸÉŸé',
    latin:'Allaahumma... iftah lii... abwaaba rahmatika...',
    latinBersih:'Allaahumma iftah lii abwaaba rahmatika.',
    arti:'Ya Allah, bukalah untukku pintu-pintu rahmat-Mu.'
  },
  {
    icon:'üïå', nama:'Doa Keluar Masjid', sumber:'HR. Muslim no. 713',
    arab:'ÿßŸÑŸÑŸéŸëŸáŸèŸÖŸéŸë ÿ•ŸêŸÜŸêŸëŸä ÿ£Ÿéÿ≥Ÿíÿ£ŸéŸÑŸèŸÉŸé ŸÖŸêŸÜŸí ŸÅŸéÿ∂ŸíŸÑŸêŸÉŸé',
    latin:'Allaahumma... innii as-aluka... min fadhlika...',
    latinBersih:'Allaahumma innii as aluka min fadhlika.',
    arti:'Ya Allah, sesungguhnya aku memohon kepada-Mu karunia-Mu.'
  },
  {
    icon:'üåç', nama:'Doa Kebaikan Dunia & Akhirat', sumber:'QS. Al-Baqarah: 201',
    arab:'ÿ±Ÿéÿ®ŸéŸëŸÜŸéÿß ÿ¢ÿ™ŸêŸÜŸéÿß ŸÅŸêŸä ÿßŸÑÿØŸèŸëŸÜŸíŸäŸéÿß ÿ≠Ÿéÿ≥ŸéŸÜŸéÿ©Ÿã ŸàŸéŸÅŸêŸä ÿßŸÑŸíÿ¢ÿÆŸêÿ±Ÿéÿ©Ÿê ÿ≠Ÿéÿ≥ŸéŸÜŸéÿ©Ÿã ŸàŸéŸÇŸêŸÜŸéÿß ÿπŸéÿ∞Ÿéÿßÿ®Ÿé ÿßŸÑŸÜŸéŸëÿßÿ±Ÿê',
    latin:'Rabbanaa aatinaa fid-dunyaa hasanatan... wa fil-aakhirati hasanatan... waqinaa \'adzaaban-naar...',
    latinBersih:'Rabbanaa aatinaa fid dunyaa hasanatan, wa fil aakhirati hasanatan, wa qinaa adzaaban naar.',
    arti:'Ya Tuhan kami, berilah kami kebaikan di dunia dan kebaikan di akhirat, serta lindungilah kami dari siksa api neraka.'
  },
  {
    icon:'üí™', nama:'Doa Mohon Kemudahan', sumber:'QS. Thaha: 25-28',
    arab:'ÿ±Ÿéÿ®ŸêŸë ÿßÿ¥Ÿíÿ±Ÿéÿ≠Ÿí ŸÑŸêŸä ÿµŸéÿØŸíÿ±ŸêŸä ŸàŸéŸäŸéÿ≥ŸêŸëÿ±Ÿí ŸÑŸêŸä ÿ£ŸéŸÖŸíÿ±ŸêŸä',
    latin:'Rabbish-rah lii shadrii... wa yassir lii amrii...',
    latinBersih:'Rabbish rah lii shadrii, wa yassir lii amrii.',
    arti:'Ya Tuhanku, lapangkanlah dadaku dan mudahkanlah urusanku.'
  },
  {
    icon:'üíß', nama:'Doa Memulai Wudhu', sumber:'HR. Abu Dawud no. 101 & Ibnu Majah no. 399',
    arab:'ÿ®Ÿêÿ≥ŸíŸÖŸê ÿßŸÑŸÑŸéŸëŸáŸê',
    latin:'Bismillaah...',
    latinBersih:'Bismillaah.',
    arti:'Dengan menyebut nama Allah.'
  },
  {
    icon:'‚ú®', nama:'Doa Sesudah Wudhu', sumber:'HR. Muslim no. 234',
    arab:'ÿ£Ÿéÿ¥ŸíŸáŸéÿØŸè ÿ£ŸéŸÜŸí ŸÑŸéÿß ÿ•ŸêŸÑŸéŸáŸé ÿ•ŸêŸÑŸéŸëÿß ÿßŸÑŸÑŸéŸëŸáŸè ŸàŸéÿ≠ŸíÿØŸéŸáŸè ŸÑŸéÿß ÿ¥Ÿéÿ±ŸêŸäŸÉŸé ŸÑŸéŸáŸè ŸàŸéÿ£Ÿéÿ¥ŸíŸáŸéÿØŸè ÿ£ŸéŸÜŸéŸë ŸÖŸèÿ≠ŸéŸÖŸéŸëÿØŸãÿß ÿπŸéÿ®ŸíÿØŸèŸáŸè ŸàŸéÿ±Ÿéÿ≥ŸèŸàŸÑŸèŸáŸè',
    latin:'Asyhadu allaa ilaaha illallaahu... wahdahu laa syariika lahu... wa asyhadu anna muhammadan... \'abduhu wa rasuuluh...',
    latinBersih:'Asyhadu allaa ilaaha illallaahu, wahdahu laa syariika lahu, wa asyhadu anna muhammadan abduhu wa rasuuluh.',
    arti:'Aku bersaksi tiada tuhan selain Allah semata, tiada sekutu bagi-Nya. Dan aku bersaksi bahwa Muhammad adalah hamba dan utusan-Nya.'
  },
  {
    icon:'üåô', nama:'Doa Melihat Bulan Baru', sumber:'HR. Tirmidzi no. 3451',
    arab:'ÿßŸÑŸÑŸéŸëŸáŸè ÿ£ŸéŸÉŸíÿ®Ÿéÿ±Ÿè ÿßŸÑŸÑŸéŸëŸáŸèŸÖŸéŸë ÿ£ŸéŸáŸêŸÑŸéŸëŸáŸè ÿπŸéŸÑŸéŸäŸíŸÜŸéÿß ÿ®ŸêÿßŸÑŸíÿ£ŸéŸÖŸíŸÜŸê ŸàŸéÿßŸÑÿ•ŸêŸäŸÖŸéÿßŸÜŸê ŸàŸéÿßŸÑÿ≥ŸéŸëŸÑÿßŸÖŸéÿ©Ÿê ŸàŸéÿßŸÑÿ•Ÿêÿ≥ŸíŸÑÿßŸÖŸê',
    latin:'Allaahu akbar... Allaahumma ahillahuu \'alainaa... bil-amni wal-iimaan... was-salaamati wal-islaam...',
    latinBersih:"Allaahu akbar. Allaahumma ahillahuu alainaa, bil amni wal iimaan, was salaamati wal islaam.",
    arti:'Allah Maha Besar. Ya Allah, tampakkanlah bulan itu kepada kami dengan keamanan, keimanan, dan keselamatan.'
  },
  {
    icon:'ü§ß', nama:'Doa Ketika Bersin', sumber:'HR. Bukhari no. 6224',
    arab:'ÿßŸÑŸíÿ≠ŸéŸÖŸíÿØŸè ŸÑŸêŸÑŸéŸëŸáŸê',
    latin:'Alhamdulillaah...',
    latinBersih:'Alhamdulillaah.',
    arti:'Segala puji bagi Allah. (Jawaban yang mendengar: "Yarhamukallah")'
  },
  {
    icon:'üåü', nama:'Doa Sebelum Bercermin', sumber:'HR. Ibnu Sunni & Ibnu Abi Syaibah',
    arab:'ÿßŸÑŸÑŸéŸëŸáŸèŸÖŸéŸë ÿ£ŸéŸÜŸíÿ™Ÿé ÿ≠Ÿéÿ≥ŸéŸëŸÜŸíÿ™Ÿé ÿÆŸéŸÑŸíŸÇŸêŸä ŸÅŸéÿ≠Ÿéÿ≥ŸêŸëŸÜŸí ÿÆŸèŸÑŸèŸÇŸêŸä',
    latin:'Allaahumma anta hassanta khalqii... fahassin khuluqii...',
    latinBersih:'Allaahumma anta hassanta khalqii, fahassin khuluqii.',
    arti:'Ya Allah, Engkau telah memperindah penciptaanku, maka indahkanlah pula akhlakku.'
  },
];

// LAGU ANAK (lirik original/folklor/lagu anak Indonesia umum tanpa hak cipta ketat)
const laguData = [
  {
    emoji:'üåü', title:'Bintang Kecil', desc:'Lagu klasik tentang bintang di langit',
    lirik:`Bintang kecil di langit yang biru
Amat banyak menghias angkasa
Aku ingin terbang dan menari
Jauh tinggi ke tempat kamu berada

Bintang kecil di langit yang biru
Amat banyak menghias angkasa`,
    tts:`Bintang kecil, di langit yang biru. Amat banyak, menghias angkasa. Aku ingin, terbang dan menari. Jauh tinggi, ke tempat kamu berada. Bintang kecil, di langit yang biru. Amat banyak, menghias angkasa.`
  },
  {
    emoji:'üêõ', title:'Kupu-Kupu', desc:'Lagu tentang kupu-kupu yang indah',
    lirik:`Kupu-kupu yang lucu
Ke mana engkau terbang
Hilir mudik mencari
Bunga-bunga yang mekar

Berayun-ayun pada tangkai yang lemah
Tidakkah sayapmu merasa lelah`,
    tts:`Kupu kupu yang lucu. Ke mana engkau terbang. Hilir mudik mencari. Bunga bunga yang mekar. Berayun ayun, pada tangkai yang lemah. Tidakkah sayapmu, merasa lelah.`
  },
  {
    emoji:'üåßÔ∏è', title:'Hujan', desc:'Lagu riang tentang hujan yang menyegarkan',
    lirik:`Hujan hujan turunlah
Basahi bumi yang panas
Tanaman dan bunga
Menari kegirangan

Ayo kita bermain
Di bawah rintik hujan
Cipratan air sejuk
Sungguh menyenangkan`,
    tts:`Hujan hujan turunlah. Basahi bumi yang panas. Tanaman dan bunga. Menari kegirangan. Ayo kita bermain. Di bawah rintik hujan. Cipratan air sejuk. Sungguh menyenangkan.`
  },
  {
    emoji:'üêü', title:'Ikan di Laut', desc:'Lagu ceria tentang ikan di laut biru',
    lirik:`Ikan di laut ikannya jinak
Ditangkap nenek dijual ke pasar
Ikan di laut ikannya jinak
Dijual di pasar dibawa pulang

Ayo kita menari bersama
Seperti ikan berenang di laut
Ayo kita menari bersama
Senang dan gembira selalu`,
    tts:`Ikan di laut ikannya jinak. Ditangkap nenek dijual ke pasar. Ikan di laut ikannya jinak. Dijual di pasar dibawa pulang. Ayo kita menari bersama. Seperti ikan berenang di laut.`
  },
  {
    emoji:'üå∫', title:'Naik-Naik ke Puncak Gunung', desc:'Lagu semangat mendaki gunung',
    lirik:`Naik naik ke puncak gunung
Tinggi tinggi sekali
Kiri kanan kulihat saja
Banyak pohon cemara

Naik naik ke puncak gunung
Tinggi tinggi sekali
Kiri kanan kulihat saja
Banyak pohon cemara`,
    tts:`Naik naik ke puncak gunung. Tinggi tinggi sekali. Kiri kanan kulihat saja. Banyak pohon cemara. Naik naik ke puncak gunung. Tinggi tinggi sekali. Kiri kanan kulihat saja. Banyak pohon cemara.`
  },
  {
    emoji:'üö¢', title:'Pergi Berlayar', desc:'Lagu anak tentang bermain di laut',
    lirik:`Nenek moyangku orang pelaut
Gemar mengarung luas samudra
Menerjang ombak tiada takut
Menempuh badai sudah biasa

Angin bertiup layar terkembang
Ombak berdebur di tepi pantai
Pemuda berani bangkit sekarang
Ke laut kita beramai-ramai`,
    tts:`Nenek moyangku orang pelaut. Gemar mengarung luas samudra. Menerjang ombak tiada takut. Menempuh badai sudah biasa. Angin bertiup layar terkembang. Ombak berdebur di tepi pantai.`
  },
  {
    emoji:'‚òÄÔ∏è', title:'Matahari Terbenam', desc:'Lagu indah saat sore hari',
    lirik:`Matahari terbenam hari mulai malam
Burung-burung yang indah pulang ke sarangnya
Gelap dan sunyi sepi seluruh alam
Satu bintang muncul di langit yang biru

Tidur tidurlah anakku sayang
Ibu ada di sisimu
Mimpi indah dalam buaian
Sampai pagi yang cerah tiba`,
    tts:`Matahari terbenam hari mulai malam. Burung burung yang indah pulang ke sarangnya. Gelap dan sunyi sepi seluruh alam. Satu bintang muncul di langit yang biru. Tidur tidurlah anakku sayang. Ibu ada di sisimu.`
  },
  {
    emoji:'üå≥', title:'Lihat Kebunku', desc:'Lagu tentang kebun bunga yang indah',
    lirik:`Lihat kebunku penuh dengan bunga
Ada yang putih dan ada yang merah
Setiap hari kusiram semua
Mawar melati semuanya indah

Aneka warna di dalam taman
Harum semerbak mewangi slalu
Kupetik sekuntum bunga mawar
Untuk ibu tercinta selalu`,
    tts:`Lihat kebunku penuh dengan bunga. Ada yang putih dan ada yang merah. Setiap hari kusiram semua. Mawar melati semuanya indah. Aneka warna di dalam taman. Harum semerbak mewangi selalu.`
  },
  {
    emoji:'üê¶', title:'Burung Kakak Tua', desc:'Lagu riang tentang burung kakak tua',
    lirik:`Burung kakak tua
Hinggap di jendela
Nenek sudah tua
Giginya tinggal dua

Lekuk lekuk lekuk le
Burung kakak tua
Lekuk lekuk lekuk le
Burung kakak tua`,
    tts:`Burung kakak tua. Hinggap di jendela. Nenek sudah tua. Giginya tinggal dua. Lekuk lekuk lekuk le. Burung kakak tua. Lekuk lekuk lekuk le. Burung kakak tua.`
  },
  {
    emoji:'üéâ', title:'Selamat Ulang Tahun', desc:'Lagu untuk merayakan hari ulang tahun',
    lirik:`Selamat ulang tahun kami ucapkan
Selamat panjang umur kita doakan
Selamat sejahtera sehat sentosa
Selamat panjang umur dan bahagia

Panjang umurnya panjang umurnya
Serta mulia serta mulia
Serta mulia serta mulia
Panjang umurnya serta mulia`,
    tts:`Selamat ulang tahun kami ucapkan. Selamat panjang umur kita doakan. Selamat sejahtera sehat sentosa. Selamat panjang umur dan bahagia. Panjang umurnya, panjang umurnya. Serta mulia, serta mulia.`
  },
];

// ============ STATE ============
let soundOn = true;
let currentHewanQ=0, hewanScore=0, hewanAnswered=false, shuffledHewan=[];
const hitungState={ tambah:{q:0,score:0,answered:false,soalList:[]}, kurang:{q:0,score:0,answered:false,soalList:[]} };
let currentSpeech = null;
let currentLaguPlaying = null; // track which lagu is playing

// ============ SOUND ============
function playBeep(freq=523,dur=0.2,type='sine') {
  if(!soundOn)return;
  try {
    const ctx=new(window.AudioContext||window.webkitAudioContext)();
    const osc=ctx.createOscillator(),gain=ctx.createGain();
    osc.connect(gain);gain.connect(ctx.destination);
    osc.frequency.value=freq;osc.type=type;
    gain.gain.setValueAtTime(0.3,ctx.currentTime);
    gain.gain.exponentialRampToValueAtTime(0.001,ctx.currentTime+dur);
    osc.start(ctx.currentTime);osc.stop(ctx.currentTime+dur);
  }catch(e){}
}
function playChord(notes,dur=0.3){notes.forEach((f,i)=>setTimeout(()=>playBeep(f,dur),i*80));}
function toggleSound(){soundOn=!soundOn;document.getElementById('sound-btn').textContent=soundOn?'üîä':'üîá';}

// ============ NAVIGATION ============
function showSection(id,btn) {
  stopSpeech();
  stopLagu();
  document.querySelectorAll('.section').forEach(s=>s.classList.remove('active'));
  document.querySelectorAll('.nav-btn').forEach(b=>b.classList.remove('active'));
  document.getElementById(id).classList.add('active');
  btn.classList.add('active');
  playBeep(660,0.15);
  if(id==='hewan')initHewan();
}

// ============ SPEECH (NATURAL) ============
function stopSpeech(){
  if('speechSynthesis' in window){window.speechSynthesis.cancel();}
  currentSpeech=null;
  document.querySelectorAll('.doa-voice-btn').forEach(b=>b.classList.remove('playing'));
}

// Speak dengan parameter lebih natural
function speakNatural(text, lang='id-ID', rate=0.78, pitch=1.05, onEnd=null) {
  if(!soundOn)return;
  if(!('speechSynthesis' in window))return;
  window.speechSynthesis.cancel();
  const u = new SpeechSynthesisUtterance(text);
  u.lang = lang;
  u.rate = rate;
  u.pitch = pitch;
  u.volume = 1;
  if(onEnd) u.onend = onEnd;
  window.speechSynthesis.speak(u);
  return u;
}

// Baca latin doa kata per kata dengan highlight
function bacaLatinDoa(latinEl, latinBersih, btn) {
  if(!soundOn)return;
  stopSpeech();
  btn.classList.add('playing');
  // Highlight setiap kata satu per satu
  const kata = latinBersih.split(' ');
  let html = kata.map((k,i)=>`<span id="wd-${latinEl.id}-${i}">${k}</span>`).join(' ');
  latinEl.innerHTML = html;

  // Baca satu kalimat penuh, alami, tidak tergesa
  const u = new SpeechSynthesisUtterance(latinBersih);
  u.lang = 'id-ID';
  u.rate = 0.72;
  u.pitch = 1.08;
  u.volume = 1;

  let wordIdx = 0;
  u.onboundary = (e) => {
    if(e.name === 'word') {
      kata.forEach((_,i) => {
        const el = document.getElementById(`wd-${latinEl.id}-${i}`);
        if(el) el.classList.remove('hl');
      });
      const el = document.getElementById(`wd-${latinEl.id}-${wordIdx}`);
      if(el) el.classList.add('hl');
      wordIdx++;
    }
  };
  u.onend = () => {
    btn.classList.remove('playing');
    latinEl.innerHTML = latinBersih; // reset
  };
  window.speechSynthesis.speak(u);
}

function bacaArtiDoa(arti, btn) {
  if(!soundOn)return;
  stopSpeech();
  btn.classList.add('playing');
  const u = new SpeechSynthesisUtterance(arti);
  u.lang = 'id-ID';
  u.rate = 0.82;
  u.pitch = 1.0;
  u.volume = 1;
  u.onend = () => btn.classList.remove('playing');
  window.speechSynthesis.speak(u);
}

// ============ ALFABET ============
function buildAlfabet() {
  const grid=document.getElementById('alfabet-grid');
  alfabetData.forEach(d=>{
    const card=document.createElement('div');
    card.className='huruf-card';
    card.innerHTML=`<span class="huruf-big">${d.h}</span><span class="huruf-small">${d.k}</span><span class="huruf-emoji">${d.e}</span><span class="huruf-contoh">${d.c}</span>`;
    card.onclick=()=>{
      playChord([262,330,392],0.3);
      card.style.transform='scale(1.2) rotate(5deg)';
      setTimeout(()=>card.style.transform='',400);
      speakNatural(`Huruf ${d.h}. Contoh kata: ${d.c}`,undefined,0.8,1.2);
    };
    grid.appendChild(card);
  });
}

// ============ HIJAIYAH ============
function buildHijaiyah() {
  const grid=document.getElementById('hijaiyah-grid');
  hijaiyahData.forEach(d=>{
    const card=document.createElement('div');
    card.className='hijaiah-card';
    card.innerHTML=`<span class="hijaiah-arab">${d.a}</span><span class="hijaiah-nama">${d.n}</span><span class="hijaiah-bunyi">bunyi: ${d.b}</span>`;
    card.onclick=()=>{
      playChord([330,415,494],0.3);
      card.style.transform='scale(1.15)';
      setTimeout(()=>card.style.transform='',400);
      speakNatural(d.n,undefined,0.75,1.1);
    };
    grid.appendChild(card);
  });
}

// ============ BERHITUNG ============
function buildAngkaGrid() {
  const grid=document.getElementById('angka-grid');
  for(let n=1;n<=20;n++){
    const card=document.createElement('div');
    card.className='angka-card';
    const dots=n<=10?emojiBuah[n-1].repeat(n):emojiBuah[n-11].repeat(Math.min(n,5))+'...';
    card.innerHTML=`<span class="angka-besar">${n}</span><span class="angka-kata">${angkaKata[n]}</span><span class="angka-titik">${dots}</span>`;
    card.onclick=()=>{
      playChord([262,330,392,523],0.25);
      card.style.transform='scale(1.15)';
      setTimeout(()=>card.style.transform='',350);
      speakNatural(`${n}. ${angkaKata[n]}`,undefined,0.8,1.15);
    };
    grid.appendChild(card);
  }
}

function switchHitungTab(tab,btn) {
  document.querySelectorAll('.hitung-tab').forEach(b=>b.classList.remove('active'));
  btn.classList.add('active');
  ['angka','tambah','kurang'].forEach(t=>document.getElementById('tab-'+t).style.display='none');
  document.getElementById('tab-'+tab).style.display='block';
  playBeep(550,0.15);
  if(tab==='tambah')initHitung('tambah');
  if(tab==='kurang')initHitung('kurang');
}

function shuffle(arr){return [...arr].sort(()=>Math.random()-0.5);}

function genSoalTambah(level){
  const max=level===1?5:level===2?10:20;
  const a=Math.floor(Math.random()*max)+1;
  const b=Math.floor(Math.random()*(max-a))+1;
  return{a,b,hasil:a+b,op:'+'};
}
function genSoalKurang(level){
  const max=level===1?5:level===2?10:20;
  const hasil=Math.floor(Math.random()*max)+1;
  const b=Math.floor(Math.random()*hasil);
  return{a:hasil+b,b,hasil,op:'-'};
}

function initHitung(type){
  const s=hitungState[type];
  s.q=0;s.score=0;s.answered=false;s.soalList=[];
  for(let i=0;i<10;i++){const lv=i<4?1:i<7?2:3;s.soalList.push(type==='tambah'?genSoalTambah(lv):genSoalKurang(lv));}
  const btnId=`btnNxt${type.charAt(0).toUpperCase()+type.slice(1)}`;
  document.getElementById(btnId).classList.remove('show');
  loadHitungQ(type);
}

function loadHitungQ(type){
  const s=hitungState[type];
  if(s.q>=s.soalList.length){endHitung(type);return;}
  const soal=s.soalList[s.q];
  const lv=s.q<4?1:s.q<7?2:3;
  const maxLv=lv===1?5:lv===2?10:20;
  s.answered=false;
  const lvLabels=['','Level 1: Angka 1‚Äì5','Level 2: Angka 1‚Äì10','Level 3: Angka 1‚Äì20'];
  document.getElementById(`level-${type}`).textContent=lvLabels[lv];
  const em=emojiBuah[s.q%emojiBuah.length];
  let vis='';
  if(soal.a<=10&&soal.b<=10){vis=em.repeat(soal.a)+(type==='tambah'?' ‚ûï ':' ‚ûñ ')+em.repeat(soal.b);}
  else{vis=`${soal.a} ${type==='tambah'?'‚ûï':'‚ûñ'} ${soal.b}`;}
  document.getElementById(`visual-${type}`).textContent=vis;
  document.getElementById(`teks-${type}`).textContent=`${soal.a} ${soal.op} ${soal.b} = ?`;
  const wrong=new Set();
  while(wrong.size<3){const w=soal.hasil+(Math.floor(Math.random()*7)-3);if(w!==soal.hasil&&w>=0&&w<=maxLv+5)wrong.add(w);}
  const options=shuffle([soal.hasil,...wrong]);
  const optDiv=document.getElementById(`opts-${type}`);optDiv.innerHTML='';
  options.forEach(opt=>{
    const btn=document.createElement('button');
    btn.className='hitung-option';btn.textContent=opt;
    btn.onclick=()=>checkHitung(opt,soal.hasil,btn,type);
    optDiv.appendChild(btn);
  });
  document.getElementById(`fb-${type}`).textContent='';
  document.getElementById(`skor-${type}`).textContent=`Skor: ${s.score} ‚≠ê | Soal: ${s.q+1}/10`;
  document.getElementById(`btnNxt${type.charAt(0).toUpperCase()+type.slice(1)}`).classList.remove('show');
  speakNatural(`${soal.a} ${type==='tambah'?'tambah':'kurang'} ${soal.b} sama dengan berapa?`,undefined,0.85,1.1);
}

function checkHitung(selected,correct,btn,type){
  const s=hitungState[type];if(s.answered)return;s.answered=true;
  document.querySelectorAll(`#opts-${type} .hitung-option`).forEach(b=>{if(parseInt(b.textContent)===correct)b.classList.add('benar');});
  if(selected===correct){
    s.score++;btn.classList.add('benar');
    document.getElementById(`fb-${type}`).textContent='üéâ Benar sekali! Pintar!';
    document.getElementById(`fb-${type}`).style.color='#27AE60';
    playChord([523,659,784,1047],0.4);celebrate();
    speakNatural('Hebat! Jawabanmu benar!',undefined,0.9,1.2);
  } else {
    btn.classList.add('salah');
    document.getElementById(`fb-${type}`).textContent=`üòÖ Jawabannya ${correct}!`;
    document.getElementById(`fb-${type}`).style.color='#E74C3C';
    playBeep(200,0.4,'sawtooth');
    speakNatural(`Hampir! Jawabannya adalah ${correct}.`,undefined,0.85,1.0);
  }
  document.getElementById(`skor-${type}`).textContent=`Skor: ${s.score} ‚≠ê | Soal: ${s.q+1}/10`;
  document.getElementById(`btnNxt${type.charAt(0).toUpperCase()+type.slice(1)}`).classList.add('show');
}

function nextHitung(type){hitungState[type].q++;loadHitungQ(type);playBeep(440,0.1);}

function endHitung(type){
  const s=hitungState[type];
  document.getElementById(`visual-${type}`).textContent=s.score>=8?'üèÜ':s.score>=5?'üòä':'üí™';
  document.getElementById(`teks-${type}`).textContent=`Selesai! Skor: ${s.score}/10`;
  document.getElementById(`opts-${type}`).innerHTML='';
  document.getElementById(`fb-${type}`).textContent=s.score===10?'‚≠ê Sempurna! Kamu luar biasa!':'Terus semangat belajar! üí™';
  document.getElementById(`skor-${type}`).textContent='';
  const btnId=`btnNxt${type.charAt(0).toUpperCase()+type.slice(1)}`;
  const btn=document.getElementById(btnId);
  btn.textContent='üîÑ Main Lagi!';btn.classList.add('show');btn.onclick=()=>initHitung(type);
  if(s.score>=8)celebrate();
  playChord([523,659,784,1047,1319],0.5);
  speakNatural(`Selesai! Skor kamu ${s.score} dari sepuluh. ${s.score>=8?'Luar biasa!':'Terus semangat ya!'}`,undefined,0.85,1.1);
}

// ============ HEWAN ============
function initHewan(){
  shuffledHewan=shuffle(hewanData);currentHewanQ=0;hewanScore=0;hewanAnswered=false;
  const pb=document.getElementById('progress-stars');pb.innerHTML='';
  shuffledHewan.forEach((_,i)=>{const s=document.createElement('span');s.className='star-progress';s.textContent='‚≠ê';s.id=`star-${i}`;pb.appendChild(s);});
  loadQuestion();
}

function loadQuestion(){
  if(currentHewanQ>=shuffledHewan.length){endHewanGame();return;}
  const q=shuffledHewan[currentHewanQ];
  hewanAnswered=false;
  document.getElementById('hewan-emoji').textContent=q.e;
  document.getElementById('hewan-hint').textContent=q.jenis==='hewan'?'Apa nama hewan ini? ü§î':'Apa nama benda ini? ü§î';
  document.getElementById('hewan-clue').textContent=q.clue;
  document.getElementById('hewan-feedback').textContent='';
  document.getElementById('btn-next-hewan').classList.remove('show');
  document.getElementById('hewan-score').textContent=`Skor: ${hewanScore} ‚≠ê`;
  const opts=shuffle(q.opsi);const optDiv=document.getElementById('hewan-options');optDiv.innerHTML='';
  opts.forEach(opt=>{const btn=document.createElement('button');btn.className='hewan-option';btn.textContent=opt;btn.onclick=()=>checkAnswer(opt,q.nama,btn);optDiv.appendChild(btn);});
  speakNatural(q.clue,undefined,0.85,1.1);
}

function checkAnswer(selected,correct,btn){
  if(hewanAnswered)return;hewanAnswered=true;
  document.querySelectorAll('.hewan-option').forEach(b=>{if(b.textContent===correct)b.classList.add('benar');});
  if(selected===correct){
    hewanScore++;btn.classList.add('benar');
    document.getElementById('hewan-feedback').textContent='üéâ Hebat! Jawabanmu benar!';
    document.getElementById('hewan-feedback').style.color='#27AE60';
    playChord([523,659,784,1047],0.4);celebrate();
    const star=document.getElementById(`star-${currentHewanQ}`);if(star)star.classList.add('active');
    speakNatural('Hebat sekali! Jawabanmu benar!',undefined,0.9,1.2);
  } else {
    btn.classList.add('salah');
    document.getElementById('hewan-feedback').textContent=`üòÖ Jawabannya ${correct}!`;
    document.getElementById('hewan-feedback').style.color='#E74C3C';
    playBeep(200,0.4,'sawtooth');
    speakNatural(`Hampir benar! Jawabannya adalah ${correct}.`,undefined,0.85,1.0);
  }
  document.getElementById('hewan-score').textContent=`Skor: ${hewanScore} ‚≠ê`;
  document.getElementById('btn-next-hewan').classList.add('show');
}

function nextQuestion(){currentHewanQ++;loadQuestion();playBeep(440,0.1);}

function endHewanGame(){
  document.getElementById('hewan-emoji').textContent=hewanScore>=shuffledHewan.length*0.8?'üèÜ':'üí™';
  document.getElementById('hewan-hint').textContent=`Selesai! Skor: ${hewanScore}/${shuffledHewan.length}`;
  document.getElementById('hewan-clue').textContent=hewanScore===shuffledHewan.length?'Sempurna! Kamu luar biasa! üåü':'Terus belajar ya! üí™';
  document.getElementById('hewan-options').innerHTML='';document.getElementById('hewan-feedback').textContent='';
  const btn=document.getElementById('btn-next-hewan');
  btn.textContent='üîÑ Main Lagi!';btn.classList.add('show');btn.onclick=initHewan;
  if(hewanScore>=shuffledHewan.length*0.8)celebrate();
  playChord([523,659,784,1047,1319],0.5);
}

// ============ DOA ============
function buildDoa(){
  const grid=document.getElementById('doa-grid');
  doaData.forEach((d,idx)=>{
    const card=document.createElement('div');
    card.className='doa-card doa-collapsed';
    const latinId=`latin-${idx}`;
    card.innerHTML=`
      <span class="doa-icon">${d.icon}</span>
      <div class="doa-nama">${d.nama}</div>
      <span class="doa-sumber-tag">üìö ${d.sumber}</span>
      <div class="doa-arab">${d.arab}</div>
      <div class="doa-latin" id="${latinId}">${d.latinBersih}</div>
      <div class="doa-arti">üáÆüá© ${d.arti}</div>
      <div class="doa-voice-row">
        <button class="doa-voice-btn btn-baca-latin" id="btn-latin-${idx}" onclick="event.stopPropagation();bacaLatinDoa(document.getElementById('${latinId}'),'${d.latinBersih.replace(/'/g,"\\'")}',this)">üîä Bacakan Doa</button>
        <button class="doa-voice-btn btn-baca-arti" id="btn-arti-${idx}" onclick="event.stopPropagation();bacaArtiDoa('${d.arti.replace(/'/g,"\\'")}',this)">üìñ Baca Artinya</button>
        <button class="doa-voice-btn btn-stop-doa" onclick="event.stopPropagation();stopSpeech()">‚èπ Stop</button>
      </div>
      <span class="doa-toggle-hint">üëÜ Klik untuk lihat doa lengkap</span>
    `;
    card.onclick=()=>{
      const isOpen=!card.classList.contains('doa-collapsed');
      card.classList.toggle('doa-collapsed');
      card.querySelector('.doa-toggle-hint').textContent=isOpen?'üëÜ Klik untuk lihat doa lengkap':'üëÜ Klik untuk tutup';
      if(!isOpen){playChord([392,494,587],0.3);}
    };
    grid.appendChild(card);
  });
}

// ============ LAGU ============
function stopLagu(){
  if('speechSynthesis' in window)window.speechSynthesis.cancel();
  if(currentLaguPlaying!==null){
    const np=document.getElementById(`now-playing-${currentLaguPlaying}`);
    if(np)np.classList.remove('show');
    currentLaguPlaying=null;
  }
}

function buildLagu(){
  const grid=document.getElementById('lagu-grid');
  laguData.forEach((l,idx)=>{
    const card=document.createElement('div');
    card.className='lagu-card';
    card.innerHTML=`
      <div class="lagu-header" onclick="toggleLirik(${idx})">
        <span class="lagu-emoji">${l.emoji}</span>
        <div class="lagu-info">
          <div class="lagu-title">${l.title}</div>
          <div class="lagu-desc">${l.desc}</div>
        </div>
        <span style="font-size:18px;color:#ccc;">‚ñº</span>
      </div>
      <div class="lagu-controls">
        <button class="lagu-play-btn btn-play-lagu" onclick="playLagu(${idx})">‚ñ∂ Dengarkan</button>
        <button class="lagu-play-btn btn-stop-lagu" onclick="stopLagu()">‚èπ Stop</button>
        <button class="lagu-play-btn btn-baca-lagu" onclick="toggleLirik(${idx})">üìñ Lirik</button>
      </div>
      <div class="lagu-now-playing" id="now-playing-${idx}">
        <div class="music-wave"><span></span><span></span><span></span><span></span></div>
        Sedang diputar...
      </div>
      <div class="lagu-lirik-wrap" id="lirik-wrap-${idx}">
        <div class="lagu-lirik" id="lirik-${idx}">${l.lirik}</div>
      </div>
    `;
    grid.appendChild(card);
  });
}

function toggleLirik(idx){
  const wrap=document.getElementById(`lirik-wrap-${idx}`);
  wrap.classList.toggle('open');
  playBeep(550,0.1);
}

function playLagu(idx){
  stopLagu();
  if(!soundOn)return;
  const l=laguData[idx];
  currentLaguPlaying=idx;
  const np=document.getElementById(`now-playing-${idx}`);
  if(np)np.classList.add('show');
  // Buka lirik otomatis
  document.getElementById(`lirik-wrap-${idx}`).classList.add('open');
  // Baca dengan suara alami dan merdu
  const u=new SpeechSynthesisUtterance(l.tts);
  u.lang='id-ID';
  u.rate=0.82;
  u.pitch=1.15;
  u.volume=1;
  u.onend=()=>{
    if(np)np.classList.remove('show');
    if(currentLaguPlaying===idx)currentLaguPlaying=null;
  };
  window.speechSynthesis.speak(u);
  playBeep(660,0.15);
}

// ============ CELEBRATE ============
function celebrate(){
  const cel=document.getElementById('celebration');
  cel.style.display='block';cel.innerHTML='';
  const colors=['#FF6B9D','#FFD700','#4CAF50','#3498DB','#9B59B6','#FF8C42'];
  for(let i=0;i<60;i++){
    const c=document.createElement('div');c.className='confetti';
    c.style.cssText=`left:${Math.random()*100}%;background:${colors[Math.floor(Math.random()*colors.length)]};animation-delay:${Math.random()*0.5}s;animation-duration:${1+Math.random()}s;width:${8+Math.random()*10}px;height:${8+Math.random()*10}px;border-radius:${Math.random()>0.5?'50%':'2px'};`;
    cel.appendChild(c);
  }
  setTimeout(()=>{cel.style.display='none';cel.innerHTML='';},2500);
}

// ============ INIT ============
buildAlfabet();
buildHijaiyah();
buildAngkaGrid();
buildDoa();
buildLagu();
initHewan();
</script>
</body>
</html>
